#summary Running a Web application

= Introduction =

This document covers the process of constructing and deploy a web application so that it can be tested in development. In most cases the majority of the code for a specific function that is being tested is complete and unit tested by this point and all that remains is to verify it works in the browser.


= Build the app =

After the code has been completed and tested, you can construct the local version of the web application by running the _app_ target from the [AntJ2eePlugin J2EE plugin] like this:

{{{
$ ant app
}}}

This will create the web application using these steps:

  # Compile the code
  # JAR the project
  # Copy the project JARs into the _web/WEB-INF/lib_ directory
  # Copy the project dependencies using Savant into the _web/WEB-INF/lib_ directory
  # Copy additional configuration from _src/conf/main_ into _web/WEB-INF/classes_
  # Setup the CATALINA_BASE in _target/tomcat_ by calling the _deploy-local_ target of the [AntTomcatPlugin Tomcat plugin] (this also sets up the context by copying _deploy/tomcat/main/conf/context.xml_ to _target/tomcat/conf/Catalina/localhost/ROOT.xml_)

After these steps have completed, the application is ready to be run. The Tomcat configuration is setup so that the web application is run directly from the _web_ directory of the project. This makes modifications to web application resources immediately available (such as JSP changes).


= Run Tomcat =

To start Tomcat, use the scripts located in _target/tomcat/bin_ for you platform (tomcat.bat for Microsoft Windows and tomcat.sh for *nix) like this:

{{{
$ target/tomcat/bin/tomcat.sh
}}}

This script takes a number of commands that control how Tomcat is started. Here are the commands and their purpose:

|| *start* || Start Tomcat in a new process (fork in *nix). Output from Tomcat is directed to _target/tomcat/logs/catalina.out_ ||
|| *stop* || Shutdown a previously started Tomcat instance ||
|| *run* || Starts Tomcat in the current process. The output is displayed to stdout ||
|| *start jpda* || Starts Tomcat in debug mode ||

Once Tomcat is running the web application will be accessible in a browser via http://localhost:8080