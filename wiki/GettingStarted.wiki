#summary Getting start using JCatapult

= Introduction =

This document describes how to get up and running with JCatapult.

= JCatapult Ant =

JCatapult requires that you are using Apache Ant 1.7.0 or later. You will need to download Apache Ant if you don't already have it installed. The website for Ant is http://ant.apache.org.

You first need to install the JCatapult Ant build system. To do this you'll need to check out that module from the SubVersion repository into your Apache Ant installation. This procedure will change once the JCatapult Ant build system has produced a release.

{{{
cd $ANT_HOME
svn co http://jcatapult.googlecode.com/svn/jcatapult-ant/trunk/plugins plugins-jcatapult
}}}

Next, check out the JCatapult Ant build tools, which provide easy ways to bootstrap new JCatapult applications, libraries and components.

{{{
cd $ANT_HOME
svn co http://jcatapult.googlecode.com/svn/jcatapult-ant/trunk/tools tools-jcatapult
}}}

= Tomcat =

Currently, JCatapult requires the use of Tomcat 5.5 or later for running applications in development. This will change in the future to support Jetty and many other application servers. For now, you will need to download Apache Tomcat from http://tomcat.apache.org. Tomcat requires that you configure the CATALINA_HOME environment variable to point to the Tomcat installation directory and this must also be set to use JCatapult.

jCatapult assumes your webapp will require the use of SSL and as a result sets the 8443 connector by default in the jCatault Ant Tomcat-plugin server.xml file.  You must run the java keytool app in your user home to create the .keystore file if you haven't yet done so.  Refer to the tomcat [http://tomcat.apache.org/tomcat-5.5-doc/ssl-howto.html SSL Configuration HOW-TO] to create your .keystore file successfully.

If your webapp does not require an SSL connection, then you can override the default server.xml by providing your own in your project without the 8443 connector and implementing the tomcat plugin's deploy_local_post macrodef inside your project's build.xml.  An example implementation has been provided below and assumes you will be overriding the default server.xml with one in your project located at deploy/tomcat/main/conf/server.xml

{{{
<macrodef name="deploy_local_post">
    <sequential>
      <copy file="deploy/tomcat/main/conf/server.xml" todir="${dir.target.tomcat}/conf" overwrite="true"/>
    </sequential>
</macrodef>
}}}

Make sure you provide this implementation after the tomcat plugin import.

*NOTE FOR WINDOWS USERS:* JCatapult requires that you install Tomcat using the non-service based installation. Running Tomcat as a Windows service will not work with JCatapult. You must use the ZIP file installation of Tomcat to work with JCatapult.


= MySQL = 

Currently, JCatapult requires the use of MySQL for projects that use a database. It's currently in the works to extend this capability to PostgreSQL and more databases will be added soon. For now, you'll need to download and install MySQL 5 or later from http://www.mysql.com.

= The build.properties file =

JCatapult requires a file named build.properties to be created inside your home directory. This file points JCatapult to the location of the JDK for the project. This allows the project to clearly define which JDK it is using, which might be different than JDKs for other applications and the JDK used to run the JCatapult Ant build system. This file should contain entries for each of the JDKs you plan to use. Here is an example:

*Linux/Unix version*
{{{
jdk1.6=/usr/lib/jvm/java-6-sun
jdk1.5=/usr/lib/jvm/java-1.5.0-sun
}}}


*Windows version*
{{{
jdk1.6=C:\\Program Files\\Java\\jdk1.6.0_03
jdk1.5=C:\\Program Files\\Java\\jdk1.5.0_12
}}}

In order to successfully create databases for jCatapult projects, jCatapult requires that 2 properties be defined:

  * db.username
  * db.password

Whichever username and password you choose is arbitrary but we recommend that you use the same username as your user home account (using the same username as your home account will make it much easier to access mysql from the shell).  Additionally, you must ensure that the username specified is added to the database and given grant rights over all databases and all tables.

Example:  Lets pretend that your user account is 'userX':

Linux:
{{{
/home/userX
}}}

Mac:
{{{
/Users/userX
}}}

Windows:
{{{
C:\Documents and Settings\userX
}}}

Within your home directory's build.properties file, you'd define db.username and db.password as follows:

{{{
db.username=userX
db.password=
}}}

The last step is to add 'userX' to your mysql database (if they do not yet exist).  You can do this by logging into the mysql client using the default superuser.  The example below uses a default superuser of 'root':

{{{
mysql -uroot -p mysql
}}}

the '-p' option tells the mysql client to 'prompt for password' so enter your root password when instructed.  If you don't know it, try empty string.  Some mysql platform distributions ship with a default superuser or 'root' with empty string as password.

Once you log into the client, enter the following sql from the command line to grant all privileges to your userX.

{{{
mysql> GRANT ALL PRIVILEGES ON *.* TO 'userX'@'localhost' IDENTIFIED BY '' WITH GRANT OPTION;

GRANT ALL PRIVILEGES ON *.* TO 'userX'@'127.0.0.1' IDENTIFIED BY 'some_pass' WITH GRANT OPTION;
}}}

By default, JCatapult uses JDK 6 and therefore we suggest downloading, installing and configuring JCatapult to use that JDK.

= Create a project =

jCatapult provides the capability to create 3 different types of jCatapult projects:
  # Web Application
  # Library
  # Component

The jCatapult Ant build system comes standard with a 'make project' tool that uses pre-bundled templates to facilitate the creation of these three types of projects. Below are some basic instructions on how to use the 'make project' tool:

  # Change to the directory you want the application created in (i.e $HOME/dev/jcatapult)
  # Run the make-project tool

You don't need to be in the creation directory, but it reduces the typing required. Here is how to run the make-project tool to access its 'help' screen:

For Unix:
{{{
$ $ANT_HOME/tools-jcatapult/makeproject/make-project help
}}}


For Windows:
{{{
$ %ANT_HOME%\tools-jcatapult\makeproject\make-project.bat help
}}}

Depending on the type of project you are creating, follow the instructions accordingly.  For instance, if you want to create a web application, you'd provide the 'create-webapp' parameter as follows:


For Unix:
{{{
$ $ANT_HOME/tools-jcatapult/makeproject/make-project create-webapp
}}}

For Windows:
{{{
$ %ANT_HOME%\tools-jcatapult\makeproject\make-project create-webapp
}}}

This will ask a series of questions. For now, use these responses:

{{{
    [input] Enter project name
test-webapp
    [input] Enter directory to create the project in or press enter to use the current directory
(hit enter to create it in the current directory)
    [input] Enter package name that the project will use (i.e. com.example.project)
org.jcatapult.example.simple
    [input] Enter the group name for the project (i.e. example.com)
jcatapult.org
}}}

You should now have a JCatapult web application in the current directory named test-webapp. Change into that directory and run the ant build:

{{{
$ ant clean app
}}}

This will build the web application and prepare it to run. Once the build has completed you should be able to run the application using the scripts placed in _target/tomcat/bin_ directory like this:

*Linux/Unix*
{{{
$ target/tomcat/bin/tomcat.sh start
}}}

*Windows*
{{{
> target\tomcat\bin\tomcat.bat start
}}}

Now you should be able to access the newly created application in a browser via http://localhost:8080

= Next =

Next, we'll cover the [ProjectLayout JCatapult project layout].